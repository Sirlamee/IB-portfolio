<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-play Video on Scroll</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
        }

        .spacer {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .video-section {
            height: 100vh;
            position: relative;
            overflow: hidden;
            background-color: white;
        }

        .video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .video-container.visible {
            opacity: 1;
        }

        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .white-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            z-index: 1;
            transition: opacity 0.5s ease;
        }

        .white-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .content-after {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Section before video -->
    <div class="spacer">
        <h1>Scroll Down ‚¨áÔ∏è</h1>
    </div>

    <!-- Video section -->
    <div class="video-section" id="videoSection">
        <div class="white-overlay" id="whiteOverlay"></div>
        <div class="video-container" id="videoContainer">
            <video id="myVideo" muted loop>
                <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>

    <!-- Section after video -->
    <div class="content-after">
        <h1>Keep Scrolling! üé¨</h1>
    </div>

    <script>
        const videoSection = document.getElementById('videoSection');
        const video = document.getElementById('myVideo');
        const videoContainer = document.getElementById('videoContainer');
        const whiteOverlay = document.getElementById('whiteOverlay');

        let hasReachedHalf = false;

        // Intersection Observer to detect when section is in view
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (!entry.isIntersecting) {
                    // Section is out of view - pause video and reset
                    video.pause();
                    hasReachedHalf = false;
                    videoContainer.classList.remove('visible');
                    whiteOverlay.classList.remove('hidden');
                }
            });
        }, {
            threshold: 0
        });

        observer.observe(videoSection);

        // Scroll event to detect when scrolled to half of video section
        window.addEventListener('scroll', () => {
            const rect = videoSection.getBoundingClientRect();
            const sectionTop = rect.top;
            const sectionHeight = rect.height;
            const viewportHeight = window.innerHeight;

            // Check if we've scrolled to at least half of the video section height
            const scrolledIntoSection = viewportHeight - sectionTop;
            const halfSectionHeight = sectionHeight / 2;

            if (scrolledIntoSection >= halfSectionHeight && !hasReachedHalf) {
                // Reached halfway point
                hasReachedHalf = true;
                whiteOverlay.classList.add('hidden');
                videoContainer.classList.add('visible');
                video.play().catch(err => {
                    console.log('Autoplay prevented:', err);
                });
            } else if (scrolledIntoSection < halfSectionHeight && hasReachedHalf) {
                // Scrolled back up before halfway
                hasReachedHalf = false;
                video.pause();
                videoContainer.classList.remove('visible');
                whiteOverlay.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>